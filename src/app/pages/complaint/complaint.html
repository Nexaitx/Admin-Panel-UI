<mat-drawer-container class="drawer-container">
    <mat-drawer class="w-75 p-3" #userDrawer mode="over" [(opened)]="isDrawerOpen" position="end">
        <h2>User Details</h2>
        <div *ngIf="selectedUser">
            <p><strong>Name:</strong> {{ selectedUser.username }}</p>
            <p><strong>Email:</strong> {{ selectedUser.email }}</p>
            <p><strong>Phone:</strong> {{ selectedUser.phone }}</p>
            <p><strong>status Status:</strong> {{ selectedUser.status }}</p>
            <p><strong>subject:</strong> {{ selectedUser.subject }}</p>
            <p><strong>Created On:</strong> {{ selectedUser.message }}</p>
        </div>
        <button mat-button (click)="closeUserDrawer()">Close</button>
    </mat-drawer>

    <div>
        <div class="row mt-3">
            <mat-form-field appearance="outline" class="col-md-3">
                <mat-label>Search Complaints</mat-label>
                <input matInput (keyup)="applyFilter($event)" placeholder="Search..." #inputAllClients>
            </mat-form-field>
            <div class="col-md-6 ms-auto">
                <mat-paginator [pageSizeOptions]="[5, 10, 20, 100]" aria-label="Select page of clients">
                </mat-paginator>
            </div>
        </div>
        <section class="tableScroll-container w-100" tabindex="0">
            <table mat-table [dataSource]="dataSource" matSort>
                <ng-container matColumnDef="id" sticky="id">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>User Id </th>
                    <td mat-cell *matCellDef="let element"> {{element.id}} </td>
                </ng-container>

                <ng-container matColumnDef="username" sticky="username">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
                    <td mat-cell *matCellDef="let element"> {{element.username}} </td>
                </ng-container>

                <ng-container matColumnDef="email" sticky="email">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
                    <td mat-cell *matCellDef="let element"> {{element.email}} </td>
                </ng-container>

                <ng-container matColumnDef="phone">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Phone </th>
                    <td mat-cell *matCellDef="let element"> {{element?.phone}} </td>
                </ng-container>

                <ng-container matColumnDef="subject">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> subject </th>
                    <td mat-cell *matCellDef="let element"> {{element.subject}} </td>
                </ng-container>

                <ng-container matColumnDef="message" sticky="message">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Message </th>
                    <td mat-cell *matCellDef="let element"> {{element.message}} </td>
                </ng-container>

                <ng-container matColumnDef="status">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
                    <td mat-cell *matCellDef="let element">
                        <span *ngIf="element.status === 'RESOLVED'" class="true">Resolved</span>
                        <span *ngIf="element.status === 'PENDING'" class="false">Pending</span>
                    </td>
                </ng-container>

                <ng-container matColumnDef="actions" sticky="actions">
                    <th mat-header-cell *matHeaderCellDef> Actions </th>
                    <td mat-cell *matCellDef="let element">
                        <button mat-icon-button [matMenuTriggerFor]="actionMenu">
                            <mat-icon>more_vert</mat-icon>
                        </button>
                        <mat-menu #actionMenu="matMenu">
                            <button mat-menu-item (click)="editElement(element)">
                                <mat-icon>edit</mat-icon>
                                <span>Edit</span>
                            </button>
                            <button mat-menu-item (click)="openUserDrawer(element)">
                                <mat-icon>remove_red_eye</mat-icon>
                                <span>View</span>
                            </button>
                            <button mat-menu-item (click)="deleteElement(element)">
                                <mat-icon>delete</mat-icon>
                                <span>Delete</span>
                            </button>
                        </mat-menu>
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell" [attr.colspan]="displayedColumns.length">No data matching the filter
                        "{{inputAllClients.value}}"</td>
                </tr>
            </table>
        </section>
    </div>
</mat-drawer-container>